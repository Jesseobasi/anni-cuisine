<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Menu - Anni Cuisine</title>
    
    <link rel="stylesheet" href="./style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon" href="images/headshot.jpg" type="image/jpeg">
</head>
<body>

    <header>
      <nav id="navbar">
        <div class="nav-container">
          <h1 class="logo"><a href="index.html">Anni Cuisine</a></h1>
          <ul class="nav-links">
            <li><a href="index.html#about">About</a></li>
            <li><a href="index.html#menu">Menu</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="index.html#contact">Contact</a></li>
          </ul>
          <div class="menu-toggle">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </div>
        </div>
      </nav>
    </header>

    <main class="section menu-page-section">
      <div class="menu-container">
          
          <h2>Our Menu</h2>

          <div class="search-wrapper">
              <input type="search" id="search-bar" placeholder="Search this category...">
          </div>
  
          <nav class="tab-nav">
              <button class="tab-link active" data-tab="african">African</button>
              <button class="tab-link" data-tab="asian">Asian</button>
              <button class="tab-link" data-tab="european">European</button>
              <button class="tab-link" data-tab="american">American</button>
          </nav>
  
          <div id="african" class="tab-content active">
              <div class="menu-grid">
                  </div>
          </div>
  
          <div id="asian" class="tab-content">
              <div class="menu-grid">
                  </div>
          </div>
  
          <div id="european" class="tab-content">
              <div class="menu-grid">
                  </div>
          </div>
  
          <div id="american" class="tab-content">
              <div class="menu-grid">
                  </div>
          </div>
  
      </div>
    </main>

    <footer>
      <p>© 2025 Annis Cuisine — Designed with ❤️</p>
    </footer>

    <script>
      // --- Navbar shrink and animation ---
      window.addEventListener("scroll", function() {
        const navbar = document.getElementById("navbar");
        navbar.classList.toggle("scrolled", window.scrollY > 50);
      });

      // --- Mobile menu toggle ---
      const menuToggle = document.querySelector(".menu-toggle");
      const navLinks = document.querySelector(".nav-links");

      menuToggle.addEventListener("click", () => {
        menuToggle.classList.toggle("active");
        navLinks.classList.toggle("active");
      });

      // --- Tab and Search Logic ---
      const tabLinks = document.querySelectorAll(".tab-link");
      const tabContents = document.querySelectorAll(".tab-content");
      const searchBar = document.getElementById("search-bar");

      tabLinks.forEach(link => {
          link.addEventListener("click", () => {
              const tabId = link.getAttribute("data-tab");
              tabLinks.forEach(item => item.classList.remove("active"));
              tabContents.forEach(item => item.classList.remove("active"));
              link.classList.add("active");
              document.getElementById(tabId).classList.add("active");
              
              // --- Reset search when tab changes ---
              searchBar.value = ""; // Clear the search bar text
              
              // Make all food cards visible again
              const allFoodCards = document.querySelectorAll(".food-card");
              allFoodCards.forEach(card => {
                  card.style.display = "flex";
              });
          });
      });

      // --- Menu Loading Logic ---
      document.addEventListener("DOMContentLoaded", () => {
        loadMenu();
      });

      async function loadMenu() {
        try {
          const response = await fetch('menu-data.json');
          const menuData = await response.json();

          const containers = {
            african: document.querySelector("#african .menu-grid"),
            asian: document.querySelector("#asian .menu-grid"),
            european: document.querySelector("#european .menu-grid"),
            american: document.querySelector("#american .menu-grid")
          };

          menuData.forEach(item => {
            const foodCardHTML = `
              <div class="food-card">
                  <img src="${item.image}" alt="${item.name}">
                  <div class="food-info">
                      <h3>${item.name}</h3>
                      <p>${item.description}</p>
                  </div>
              </div>
            `;
            if (containers[item.category]) {
              containers[item.category].innerHTML += foodCardHTML;
            }
          });

          // Setup the search filter *after* cards are loaded
          setupSearchFilter();

        } catch (error) {
          console.error("Failed to load menu:", error);
        }
      }

      // --- Search Filter Logic (Per-Tab) ---
      function setupSearchFilter() {
        searchBar.addEventListener("keyup", (e) => {
            const searchTerm = e.target.value.toLowerCase();
            
            // 1. Find the currently active tab
            const activeTab = document.querySelector(".tab-content.active");
            
            // 2. Select ONLY the food cards within that active tab
            const foodCards = activeTab.querySelectorAll(".food-card");

            // 3. Loop through only those cards
            foodCards.forEach(card => {
                const title = card.querySelector("h3").textContent.toLowerCase();
                const description = card.querySelector("p").textContent.toLowerCase();
                
                if (title.includes(searchTerm) || description.includes(searchTerm)) {
                    card.style.display = "flex";
                } else {
                    card.style.display = "none";
                }
            });
        });
      }
    </script>
</body>
</html>